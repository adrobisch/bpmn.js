// Generated by uRequire v0.6.15 - template: 'combined' 
// Combined template optimized with RequireJS/r.js v2.1.13 & almond.
/**
 * @license almond 0.2.9 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

(function(e,t){var n=!("function"!=typeof define||!define.amd),i="object"==typeof exports,r=i?require:function(e){throw new Error("uRequire detected missing dependency: '"+e+"' - in a non-nodejs runtime. All it's binding variables were 'undefined'.")},s=function(e,n,s,a,o){var l,u,c;return function(e){function t(e,t){return w.call(e,t)}function n(e,t){var n,i,r,s,a,o,l,u,c,h,f,d=t&&t.split("/"),p=v.map,_=p&&p["*"]||{};if(e&&"."===e.charAt(0))if(t){for(d=d.slice(0,d.length-1),e=e.split("/"),a=e.length-1,v.nodeIdCompat&&k.test(e[a])&&(e[a]=e[a].replace(k,"")),e=d.concat(e),c=0;c<e.length;c+=1)if(f=e[c],"."===f)e.splice(c,1),c-=1;else if(".."===f){if(1===c&&(".."===e[2]||".."===e[0]))break;c>0&&(e.splice(c-1,2),c-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((d||_)&&p){for(n=e.split("/"),c=n.length;c>0;c-=1){if(i=n.slice(0,c).join("/"),d)for(h=d.length;h>0;h-=1)if(r=p[d.slice(0,h).join("/")],r&&(r=r[i])){s=r,o=c;break}if(s)break;!l&&_&&_[i]&&(l=_[i],u=c)}!s&&l&&(s=l,o=u),s&&(n.splice(0,o,s),e=n.join("/"))}return e}function i(t,n){return function(){return d.apply(e,b.call(arguments,0).concat([t,n]))}}function r(e){return function(t){return n(t,e)}}function s(e){return function(t){g[e]=t}}function a(n){if(t(m,n)){var i=m[n];delete m[n],y[n]=!0,f.apply(e,i)}if(!t(g,n)&&!t(y,n))throw new Error("No "+n);return g[n]}function o(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function h(e){return function(){return v&&v.config&&v.config[e]||{}}}var f,d,p,_,g={},m={},v={},y={},w=Object.prototype.hasOwnProperty,b=[].slice,k=/\.js$/;p=function(e,t){var i,s=o(e),l=s[0];return e=s[1],l&&(l=n(l,t),i=a(l)),l?e=i&&i.normalize?i.normalize(e,r(t)):n(e,t):(e=n(e,t),s=o(e),l=s[0],e=s[1],l&&(i=a(l))),{f:l?l+"!"+e:e,n:e,pr:l,p:i}},_={require:function(e){return i(e)},exports:function(e){var t=g[e];return"undefined"!=typeof t?t:g[e]={}},module:function(e){return{id:e,uri:"",exports:g[e],config:h(e)}}},f=function(n,r,o,l){var u,c,h,f,d,v,w=[],b=typeof o;if(l=l||n,"undefined"===b||"function"===b){for(r=!r.length&&o.length?["require","exports","module"]:r,d=0;d<r.length;d+=1)if(f=p(r[d],l),c=f.f,"require"===c)w[d]=_.require(n);else if("exports"===c)w[d]=_.exports(n),v=!0;else if("module"===c)u=w[d]=_.module(n);else if(t(g,c)||t(m,c)||t(y,c))w[d]=a(c);else{if(!f.p)throw new Error(n+" missing "+c);f.p.load(f.n,i(l,!0),s(c),{}),w[d]=g[c]}h=o?o.apply(g[n],w):void 0,n&&(u&&u.exports!==e&&u.exports!==g[n]?g[n]=u.exports:h===e&&v||(g[n]=h))}else n&&(g[n]=o)},l=u=d=function(t,n,i,r,s){if("string"==typeof t)return _[t]?_[t](n):a(p(t,n).f);if(!t.splice){if(v=t,v.deps&&d(v.deps,v.callback),!n)return;n.splice?(t=n,n=i,i=null):t=e}return n=n||function(){},"function"==typeof i&&(i=r,r=s),r?f(e,t,n,i):setTimeout(function(){f(e,t,n,i)},4),d},d.config=function(e){return d(e)},l._defined=g,c=function(e,n,i){n.splice||(i=n,n=[]),t(g,e)||t(m,e)||(m[e]=[e,n,i])},c.amd={jQuery:!0}}(),c("almond",function(){}),c("bpmn/util/JSClass",["require","exports","module"],function(e,t,n){var i="undefined"==typeof this.JS?{}:this.JS;return function(e){var n="object"==typeof this.global?this.global:this,r="object"==typeof t;r?(t.JS=t,i=t):n.JS=i,e(n,i)}(function(e,t){"use strict";var n={ENV:e};n.END_WITHOUT_DOT=/([^\.])$/,n.array=function(e){for(var t=[],n=e.length;n--;)t[n]=e[n];return t},n.bind=function(e,t){return function(){return e.apply(t,arguments)}},n.Date=n.ENV.Date,n.extend=function(e,t,n){if(!e||!t)return e;for(var i in t)e[i]!==t[i]&&(n===!1&&e.hasOwnProperty(i)||(e[i]=t[i]));return e},n.indexOf=function(e,t){if(e.indexOf)return e.indexOf(t);for(var n=e.length;n--;)if(e[n]===t)return n;return-1},n.isType=function(e,t){return"string"==typeof t?typeof e===t:null===e||void 0===e?!1:"function"==typeof t&&e instanceof t||e.isA&&e.isA(t)||e.constructor===t},n.makeBridge=function(e){var t=function(){};return t.prototype=e.prototype,new t},n.makeClass=function(e){e=e||Object;var t=function(){return this.initialize?this.initialize.apply(this,arguments)||this:this};return t.prototype=n.makeBridge(e),t.superclass=e,t.subclasses=[],e.subclasses&&e.subclasses.push(t),t},n.match=function(e,t){return void 0===t?!1:"function"==typeof e.test?e.test(t):e.match(t)},n.Method=n.makeClass(),n.extend(n.Method.prototype,{initialize:function(e,t,n){if(this.module=e,this.name=t,this.callable=n,this._words={},"function"==typeof n){this.arity=n.length;for(var i=n.toString().match(/\b[a-z\_\$][a-z0-9\_\$]*\b/gi),r=i.length;r--;)this._words[i[r]]=!0}},setName:function(e){this.callable.displayName=this.displayName=e},contains:function(e){return this._words.hasOwnProperty(e)},call:function(){return this.callable.call.apply(this.callable,arguments)},apply:function(e,t){return this.callable.apply(e,t)},compile:function(e){for(var t,i=this,r=i.module.__trace__||e.__trace__,s=i.callable,a=i._words,o=n.Method._keywords,l=o.length,u=[];l--;)t=o[l],a[t.name]&&u.push(t);if(0===u.length&&!r)return s;var c=function(){for(var t,n,r,a=u.length,o=a,l={};o--;)t=u[o],n=this[t.name],(!n||n.__kwd__)&&(l[t.name]={_value:n,_own:this.hasOwnProperty(t.name)},r=t.filter(i,e,this,arguments),r&&(r.__kwd__=!0),this[t.name]=r);for(var c=s.apply(this,arguments),o=a;o--;)t=u[o],l[t.name]&&(l[t.name]._own?this[t.name]=l[t.name]._value:delete this[t.name]);return c};return c},toString:function(){var e=this.displayName||this.module.toString()+"#"+this.name;return"#<Method:"+e+">"}}),n.Method.create=function(e,t,n){if(n&&n.__inc__&&n.__fns__)return n;var i="function"!=typeof n?n:new this(e,t,n);return this.notify(i),i},n.Method.compile=function(e,t){return e instanceof this?e.compile(t):e},n.Method.__listeners__=[],n.Method.added=function(e,t){this.__listeners__.push([e,t])},n.Method.notify=function(e){for(var t,n=this.__listeners__,i=n.length;i--;)t=n[i],t[0].call(t[1],e)},n.Method._keywords=[],n.Method.keyword=function(e,t){this._keywords.push({name:e,filter:t})},n.Method.trace=function(e){for(var t=e.length;t--;)e[t].__trace__=!0,e[t].resolve()},n.Method.untrace=function(e){for(var t=e.length;t--;)e[t].__trace__=!1,e[t].resolve()},n.Module=n.makeClass(),n.Module.__queue__=[],n.extend(n.Module.prototype,{initialize:function(e,t,i){"string"!=typeof e&&(i=arguments[1],t=arguments[0],e=void 0),i=i||{},this.__inc__=[],this.__dep__=[],this.__fns__={},this.__tgt__=i._target,this.__anc__=null,this.__mct__={},this.setName(e),this.include(t,{_resolve:!1}),n.Module.__queue__&&n.Module.__queue__.push(this)},setName:function(e){this.displayName=e||"";for(var t in this.__fns__)this.__name__(t);e&&this.__meta__&&this.__meta__.setName(e+".")},__name__:function(e){if(this.displayName){var t=this.__fns__[e];if(t)return e=this.displayName.replace(n.END_WITHOUT_DOT,"$1#")+e,"function"==typeof t.setName?t.setName(e):void("function"==typeof t&&(t.displayName=e))}},define:function(e,t,i){var r=n.Method.create(this,e,t),s=(i||{})._resolve;this.__fns__[e]=r,this.__name__(e),s!==!1&&this.resolve()},include:function(e,t){if(!e)return this;var n,i,r,s,a,o,t=t||{},l=t._resolve!==!1,u=e.extend,c=e.include;if(e.__fns__&&e.__inc__)this.__inc__.push(e),(e.__dep__||{}).push&&e.__dep__.push(this),(n=t._extended)?"function"==typeof e.extended&&e.extended(n):"function"==typeof e.included&&e.included(this);else{if(this.shouldIgnore("extend",u))for(s=[].concat(u),a=0,o=s.length;o>a;a++)this.extend(s[a]);if(this.shouldIgnore("include",c))for(s=[].concat(c),a=0,o=s.length;o>a;a++)this.include(s[a],{_resolve:!1});for(i in e)e.hasOwnProperty(i)&&(r=e[i],this.shouldIgnore(i,r)||this.define(i,r,{_resolve:!1}));e.hasOwnProperty("toString")&&this.define("toString",e.toString,{_resolve:!1})}return l&&this.resolve(),this},alias:function(e){for(var t in e)e.hasOwnProperty(t)&&this.define(t,this.instanceMethod(e[t]),{_resolve:!1});this.resolve()},resolve:function(e){var t,i,r,s,e=e||this,a=e.__tgt__,o=this.__inc__,l=this.__fns__;if(e===this)for(this.__anc__=null,this.__mct__={},t=this.__dep__.length;t--;)this.__dep__[t].resolve();if(a){for(t=0,i=o.length;i>t;t++)o[t].resolve(e);for(r in l)s=n.Method.compile(l[r],e),a[r]!==s&&(a[r]=s);l.hasOwnProperty("toString")&&(a.toString=n.Method.compile(l.toString,e))}},shouldIgnore:function(e,t){return("extend"===e||"include"===e)&&("function"!=typeof t||t.__fns__&&t.__inc__)},ancestors:function(e){var t=!e,e=e||[],i=this.__inc__;if(t&&this.__anc__)return this.__anc__.slice();for(var r=0,s=i.length;s>r;r++)i[r].ancestors(e);return n.indexOf(e,this)<0&&e.push(this),t&&(this.__anc__=e.slice()),e},lookup:function(e){var t=this.__mct__[e];if(t&&t.slice)return t.slice();for(var n,i=this.ancestors(),r=[],s=0,a=i.length;a>s;s++)n=i[s].__fns__,n.hasOwnProperty(e)&&r.push(n[e]);return this.__mct__[e]=r.slice(),r},includes:function(e){if(e===this)return!0;for(var t=this.__inc__,n=0,i=t.length;i>n;n++)if(t[n].includes(e))return!0;return!1},instanceMethod:function(e){return this.lookup(e).pop()},instanceMethods:function(e,t){var i,r=t||[],s=this.__fns__;for(i in s)n.isType(this.__fns__[i],n.Method)&&(n.indexOf(r,i)>=0||r.push(i));if(e!==!1)for(var a=this.ancestors(),o=a.length;o--;)a[o].instanceMethods(!1,r);return r},match:function(e){return e&&e.isA&&e.isA(this)},toString:function(){return this.displayName}}),n.Kernel=new n.Module("Kernel",{__eigen__:function(){if(this.__meta__)return this.__meta__;var e=this.toString()+".";return this.__meta__=new n.Module(e,null,{_target:this}),this.__meta__.include(this.klass,{_resolve:!1})},equals:function(e){return this===e},extend:function(e,t){var n=(t||{})._resolve;return this.__eigen__().include(e,{_extended:this,_resolve:n}),this},hash:function(){return n.Kernel.hashFor(this)},isA:function(e){return"function"==typeof e&&this instanceof e||this.__eigen__().includes(e)},method:function(e){var t=this.__mct__=this.__mct__||{},i=t[e],r=this[e];if("function"!=typeof r)return r;if(i&&r===i._value)return i._bound;var s=n.bind(r,this);return t[e]={_value:r,_bound:s},s},methods:function(){return this.__eigen__().instanceMethods()},tap:function(e,t){return e.call(t,this),this},toString:function(){if(this.displayName)return this.displayName;var e=this.klass.displayName||this.klass.toString();return"#<"+e+":"+this.hash()+">"}}),function(){var e=1;n.Kernel.hashFor=function(t){return void 0!==t.__hash__?t.__hash__:(t.__hash__=((new n.Date).getTime()+e).toString(16),e+=1,t.__hash__)}}(),n.Class=n.makeClass(n.Module),n.extend(n.Class.prototype,{initialize:function(e,t,i,r){"string"!=typeof e&&(r=arguments[2],i=arguments[1],t=arguments[0],e=void 0),"function"!=typeof t&&(r=i,i=t,t=Object),n.Module.prototype.initialize.call(this,e),r=r||{};var s=n.makeClass(t);n.extend(s,this),s.prototype.constructor=s.prototype.klass=s,s.__eigen__().include(t.__meta__,{_resolve:r._resolve}),s.setName(e),s.__tgt__=s.prototype;var a=t===Object?{}:t.__fns__?t:new n.Module(t.prototype,{_resolve:!1});return s.include(n.Kernel,{_resolve:!1}).include(a,{_resolve:!1}).include(i,{_resolve:!1}),r._resolve!==!1&&s.resolve(),"function"==typeof t.inherited&&t.inherited(s),s}}),function(){var e=function(e){var t={},i=e.prototype;for(var r in i)i.hasOwnProperty(r)&&(t[r]=n.Method.create(e,r,i[r]));return t},t=function(t,i){var r=n[t],s=n[i];r.__inc__=[],r.__dep__=[],r.__fns__=e(r),r.__tgt__=r.prototype,r.prototype.constructor=r.prototype.klass=r,n.extend(r,n.Class.prototype),r.include(s||n.Kernel),r.setName(t),r.constructor=r.klass=n.Class};t("Method"),t("Module"),t("Class","Module");var i=n.Kernel.instanceMethod("__eigen__");i.call(n.Method).resolve(),i.call(n.Module).resolve(),i.call(n.Class).include(n.Module.__meta__)}(),n.NotImplementedError=new n.Class("NotImplementedError",Error),n.Method.keyword("callSuper",function(e,t,i,r){var s=t.lookup(e.name),a=s.length-1,o=n.array(r);if(0===a)return void 0;var l=function(){for(var e=arguments.length;e--;)o[e]=arguments[e];a-=1,0===a&&delete i.callSuper;var t=s[a].apply(i,o);return i.callSuper=l,a+=1,t};return l}),n.Method.keyword("blockGiven",function(e,t,n,i){var r=Array.prototype.slice.call(i,e.arity),s="function"==typeof r[0];return function(){return s}}),n.Method.keyword("yieldWith",function(e,t,n,i){var r=Array.prototype.slice.call(i,e.arity);return function(){return"function"==typeof r[0]?r[0].apply(r[1]||null,arguments):void 0}}),n.Interface=new n.Class("Interface",{initialize:function(e){this.test=function(t,n){for(var i=e.length;i--;)if("function"!=typeof t[e[i]])return n?e[i]:!1;return!0}},extend:{ensure:function(){for(var e,t,i=n.array(arguments),r=i.shift();e=i.shift();)if(t=e.test(r,!0),t!==!0)throw new Error("object does not implement "+t+"()")}}}),n.Singleton=new n.Class("Singleton",{initialize:function(e,t,i){return new(new n.Class(e,t,i)())}}),n.extend(t,n),e.JS&&n.extend(e.JS,n)}),n.exports}),c("bpmn/util/Index",["require","exports","module","./JSClass"],function(e,t,n,i){var r={initialize:function(){this._={}},add:function(e,t){this._[e]=t},addArray:function(e,t){this._[e]||(this._[e]=[]),this._[e].push(t)},addMap:function(e,t,n){this._[e]||(this._[e]={}),this._[e][t]=n},item:function(e){return this._[e]}};return new i.Class(r)}),c("bpmn/Clazz",["require","exports","module","./util/JSClass"],function(e,t,n,i){var r={initialize:function(){this.text=null,this.reference={},this.attribute={}},addReference:function(e){this.reference[e.name]=e;var t=this.__internalFieldName(e.name);this[t]=e.containment===!0?[]:null,this[e.name]=function(t){return this.accessor(e.name,t)}},addAttribute:function(e){this.attribute[e.name]=e,this[e.name]=function(t){return this.accessor(e.name,t)}},accessor:function(e,t){var n=this.__internalFieldName(e);return null!=t&&void 0!=t&&(this[n]=t),this[n]},__internalFieldName:function(e){return"_"+e},init:function(){},setText:function(e){this.text=e}};return new i.Class(r)}),c("bpmn/BaseElement",["require","exports","module","./util/JSClass","./Clazz"],function(e,t,n,i,r){var s={tag:"baseElement",initialize:function(){this.callSuper(),this.addReference({name:"documentation",type:function(){}}),this.addAttribute({name:"id",type:String}),this.addAttribute({name:"name",type:String});var e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,n="x"==e?t:3&t|8;return n.toString(16)});this.id(e)},init:function(){var e=this.id();this._definitions.index.add(e,this),this._definitions.index.addMap(this.declaredClass,e,this)}};return new i.Class(r,s)}),c("bpmn/CallableElement",["require","exports","module","./util/JSClass","./BaseElement"],function(e,t,n,i,r){var s={initialize:function(){this.callSuper(),this.addAttribute({name:"name",type:String})},init:function(){this.callSuper()}};return new i.Class(r,s)}),c("bpmn/Package",["require","exports","module","./util/JSClass"],function(e,t,n,i){var r={tagMap:{},initialize:function(){},registerClass:function(e){var t=e.prototype.tag;return t&&(this.tagMap[t.toLowerCase()]=e),e}},s=new i.Class(r);return new s}),c("bpmn/FlowElement",["require","exports","module","./util/JSClass","./BaseElement","./Package"],function(e,t,n,i,r,s){var a={tag:"flowElement",initialize:function(){this.callSuper()},init:function(){this.callSuper()},getDiagramElement:function(){return this._definitions.index.item(this.id()+":di")},getBounds:function(){return this.getDiagramElement().bounds()},getLabel:function(){return this.getDiagramElement().label()},getWaypoints:function(){return this.getDiagramElement().waypoints()}},o=new i.Class(r,a);return s.registerClass(o),o}),c("bpmn/FlowElementsContainer",["require","exports","module","./util/JSClass","./BaseElement","./FlowElement"],function(e,t,n,i,r,s){var a={initialize:function(){this.callSuper(),this.addReference({name:"flowElements",containment:!0,type:s})},init:function(){this.callSuper()}};return new i.Module(a)}),c("bpmn/Process",["require","exports","module","./util/JSClass","./CallableElement","./FlowElementsContainer","./Package"],function(e,t,n,i,r,s,a){var o={include:[s],tag:"process",initialize:function(){this.callSuper(),this.addAttribute({name:"isExecutable",type:"boolean"}),this.addAttribute({name:"name",type:String})}},l=new i.Class(r,o);return a.registerClass(l)}),c("bpmn/Collaboration",["require","exports","module","./util/JSClass","./Package"],function(e,t,n,i,r){var s={tag:"collaboration",initialize:function(){}},a=new i.Class(s);return r.registerClass(a),a}),c("bpmn/di/DiagramElement",["require","exports","module","../util/JSClass","../Clazz","../Package"],function(e,t,n,i,r,s){var a={tag:"diagramElement",initialize:function(){this.callSuper(),this.addAttribute({name:"id",type:String}),this.addAttribute({name:"bpmnElement",type:String})},init:function(){this._definitions.index.add(this.bpmnElement()+":di",this)}},o=new i.Class(r,a);return s.registerClass(o),o}),c("bpmn/di/Bounds",["require","exports","module","../util/JSClass","../Clazz","../Package"],function(e,t,n,i,r,s){var a={tag:"Bounds",initialize:function(){this.callSuper(),this.addAttribute({name:"x",type:"float"}),this.addAttribute({name:"y",type:"float"}),this.addAttribute({name:"width",type:"float"}),this.addAttribute({name:"height",type:"float"})},init:function(){this.callSuper()}},o=new i.Class(r,a);return s.registerClass(o),o}),c("bpmn/di/BPMNLabel",["require","exports","module","../util/JSClass","../Clazz","../Package","./Bounds"],function(e,t,n,i,r,s,a){var o={tag:"BPMNLabel",initialize:function(){this.callSuper(),this.addReference({name:"bounds",type:a})},init:function(){this.callSuper()}},l=new i.Class(r,o);return s.registerClass(l),l}),c("bpmn/di/BPMNShape",["require","exports","module","../util/JSClass","./DiagramElement","./Bounds","./BPMNLabel","../Package"],function(e,t,n,i,r,s,a,o){var l={tag:"BPMNShape",initialize:function(){this.callSuper(),this.addReference({name:"bounds",type:s}),this.addReference({name:"label",type:a})},init:function(){this.callSuper()}},u=new i.Class(r,l);return o.registerClass(u),u}),c("bpmn/di/Waypoint",["require","exports","module","../util/JSClass","../Clazz","../Package"],function(e,t,n,i,r,s){var a={tag:"waypoint",initialize:function(){this.callSuper(),this.addAttribute({name:"x",type:"float"}),this.addAttribute({name:"y",type:"float"})},init:function(){this.callSuper()},__internalFieldName:function(e){return e}},o=new i.Class(r,a);return s.registerClass(o),o}),c("bpmn/di/BPMNEdge",["require","exports","module","../util/JSClass","./DiagramElement","./Waypoint","../Package"],function(e,t,n,i,r,s,a){var o={tag:"BPMNEdge",initialize:function(){this.callSuper(),this.addReference({name:"waypoints",containment:!0,type:s})},init:function(){this.callSuper()}},l=new i.Class(r,o);return a.registerClass(l),l}),c("bpmn/di/BPMNPlane",["require","exports","module","../util/JSClass","../Clazz","../Package","./BPMNShape","./BPMNEdge","./DiagramElement"],function(e,t,n,i,r,s,a,o,l){var u={tag:"BPMNPlane",initialize:function(){this.callSuper(),this.addReference({name:"diagramElements",containment:!0,type:l})},init:function(){this.callSuper()}},c=new i.Class(r,u);return s.registerClass(c),c}),c("bpmn/di/BPMNDiagram",["require","exports","module","../util/JSClass","../Clazz","./BPMNPlane","../Package"],function(e,t,n,i,r,s,a){var o={tag:"BPMNDiagram",initialize:function(){this.callSuper(),this.addReference({name:"plane",type:s})}},l=new i.Class(r,o);return a.registerClass(l),l}),c("bpmn/FlowNode",["require","exports","module","./util/JSClass","./FlowElement","./Package"],function(e,t,n,i,r,s){var a={tag:"flowNode",initialize:function(){this.callSuper()},init:function(){this.callSuper()},incoming:function(){var e=this._definitions.index.item("target:"+this.id());return e?e:[]},outgoing:function(){var e=this._definitions.index.item("source:"+this.id());return e?e:[]}},o=new i.Class(r,a);return s.registerClass(o),o}),c("bpmn/Event",["require","exports","module","./util/JSClass","./FlowNode","./Package"],function(e,t,n,i,r,s){var a={tag:"event",initialize:function(){this.callSuper()},init:function(){this.callSuper()}},o=new i.Class(r,a);return s.registerClass(o),o}),c("bpmn/CatchEvent",["require","exports","module","./util/JSClass","./Event","./Package"],function(e,t,n,i,r,s){var a={tag:"catchEvent",initialize:function(){this.callSuper()},init:function(){this.callSuper()}},o=new i.Class(r,a);return s.registerClass(o),o}),c("bpmn/StartEvent",["require","exports","module","./util/JSClass","./CatchEvent","./Package"],function(e,t,n,i,r,s){var a={tag:"startEvent",initialize:function(){this.callSuper()},init:function(){this.callSuper()}},o=new i.Class(r,a);return s.registerClass(o),o}),c("bpmn/ThrowEvent",["require","exports","module","./util/JSClass","./Event","./Package"],function(e,t,n,i,r,s){var a={tag:"throwEvent",initialize:function(){this.callSuper()},init:function(){this.callSuper()}},o=new i.Class(r,a);return s.registerClass(o),o}),c("bpmn/EndEvent",["require","exports","module","./util/JSClass","./ThrowEvent","./Package"],function(e,t,n,i,r,s){var a={tag:"endEvent",initialize:function(){this.callSuper()},init:function(){this.callSuper()}},o=new i.Class(r,a);return s.registerClass(o),o}),c("bpmn/BoundaryEvent",["require","exports","module","./util/JSClass","./CatchEvent","./Package"],function(e,t,n,i,r,s){var a={tag:"boundaryEvent",initialize:function(){this.callSuper()},init:function(){this.callSuper()}},o=new i.Class(r,a);return s.registerClass(o),o}),c("bpmn/Activity",["require","exports","module","./util/JSClass","./FlowNode","./Package"],function(e,t,n,i,r,s){var a={tag:"activity",initialize:function(){this.callSuper()},init:function(){this.callSuper()}},o=new i.Class(r,a);return s.registerClass(o),o}),c("bpmn/Task",["require","exports","module","./util/JSClass","./Activity","./Package"],function(e,t,n,i,r,s){var a={tag:"task",initialize:function(){this.callSuper()},init:function(){this.callSuper()}},o=new i.Class(r,a);return s.registerClass(o),o}),c("bpmn/UserTask",["require","exports","module","./util/JSClass","./Task","./Package"],function(e,t,n,i,r,s){var a={tag:"userTask",initialize:function(){this.callSuper()},init:function(){this.callSuper()}},o=new i.Class(r,a);return s.registerClass(o),o}),c("bpmn/ServiceTask",["require","exports","module","./util/JSClass","./Task","./Package"],function(e,t,n,i,r,s){var a={tag:"serviceTask",initialize:function(){this.callSuper()},init:function(){this.callSuper()}},o=new i.Class(r,a);return s.registerClass(o),o}),c("bpmn/BusinessRuleTask",["require","exports","module","./util/JSClass","./Task","./Package"],function(e,t,n,i,r,s){var a={tag:"businessRuleTask",initialize:function(){this.callSuper()},init:function(){this.callSuper()}},o=new i.Class(r,a);return s.registerClass(o),o}),c("bpmn/ReceiveTask",["require","exports","module","./util/JSClass","./Task","./Package"],function(e,t,n,i,r,s){var a={tag:"receiveTask",initialize:function(){this.callSuper()},init:function(){this.callSuper()}},o=new i.Class(r,a);return s.registerClass(o),o}),c("bpmn/SubProcess",["require","exports","module","./util/JSClass","./Activity","./FlowElementsContainer","./Package"],function(e,t,n,i,r,s,a){var o={include:[s],tag:"subProcess",initialize:function(){this.callSuper()},init:function(){this.callSuper()}},l=new i.Class(r,o);return a.registerClass(l),l}),c("bpmn/Gateway",["require","exports","module","./util/JSClass","./FlowNode","./Package"],function(e,t,n,i,r,s){var a={tag:"gateway",initialize:function(){this.callSuper()},init:function(){this.callSuper()}},o=new i.Class(r,a);return s.registerClass(o),o}),c("bpmn/ExclusiveGateway",["require","exports","module","./util/JSClass","./Gateway","./Package"],function(e,t,n,i,r,s){var a={tag:"exclusiveGateway",initialize:function(){this.callSuper()},init:function(){this.callSuper()}},o=new i.Class(r,a);return s.registerClass(o),o}),c("bpmn/ParallelGateway",["require","exports","module","./util/JSClass","./Gateway","./Package"],function(e,t,n,i,r,s){var a={tag:"parallelGateway",initialize:function(){this.callSuper()},init:function(){this.callSuper()}},o=new i.Class(r,a);return s.registerClass(o),o}),c("bpmn/ConditionExpression",["require","exports","module","./util/JSClass","./BaseElement","./Package"],function(e,t,n,i,r,s){var a={tag:"conditionExpression",initialize:function(){this.callSuper()},init:function(){this.callSuper()}},o=new i.Class(r,a);return s.registerClass(o),o}),c("bpmn/SequenceFlow",["require","exports","module","./util/JSClass","./FlowElement","./ConditionExpression","./Package"],function(e,t,n,i,r,s,a){var o={tag:"sequenceFlow",initialize:function(){this.callSuper(),this.addAttribute({name:"sourceRef",type:String}),this.addAttribute({name:"targetRef",type:String}),this.addReference({name:"conditionExpression",type:s})},getSourceRef:function(){return this._definitions.index.item(this._sourceRef)},getTargetRef:function(){return this._definitions.index.item(this._targetRef)},init:function(){this.callSuper(),this._definitions.index.addArray||(console.log("cant addArray"+this.id()),console.log(this._definitions.index.tag)),this._definitions.index.addArray("target:"+this.targetRef(),this),this._definitions.index.addArray("source:"+this.sourceRef(),this)}},l=new i.Class(r,o);return a.registerClass(l),l}),c("bpmn/Definitions",["require","exports","module","./util/JSClass","./util/Index","./BaseElement","./Process","./Collaboration","./di/BPMNDiagram","./StartEvent","./EndEvent","./BoundaryEvent","./UserTask","./ServiceTask","./BusinessRuleTask","./ReceiveTask","./SubProcess","./ExclusiveGateway","./ParallelGateway","./SequenceFlow"],function(e,t,n,i,r,s,a,o,l){var u={tag:"definitions",initialize:function(){this.callSuper(),this.addReference({name:"collaboration",type:o}),this.addReference({name:"process",containment:!0,type:a}),this.addReference({name:"bpmnDiagram",type:l}),this.index=new r}};return new i.Class(s,u)}),c("bpmn/execution/TokenStore",["require","exports","module","../util/JSClass"],function(e,t,n,i){var r={initialize:function(e){this.tokenMap=e?e:{}},add:function(e,t){this.tokenMap[e]||(this.tokenMap[e]=[]),this.tokenMap[e].push(t)},drop:function(e,t){if(this.tokenMap[e])for(var n=0;t>n;n++)this.tokenMap[e].pop()},query:function(e){return this.tokenMap[e]?this.tokenMap[e]:[]},count:function(){var e=0;for(var t in this.tokenMap)e+=this.tokenMap[t].length;return e}};return new i.Class(r)}),c("lodash",[],function(){return i?r("lodash"):"undefined"!=typeof s?s:r("lodash")}),c("q",[],function(){return i?r("q"):"undefined"!=typeof o?o:r("q")}),c("bpmn/util/Topic",["require","exports","module","./JSClass"],function(e,t,n,i){var r={publish:function(){}};return new i.Class(r)}),c("bpmn/execution/Instance",["require","exports","module","./TokenStore","../util/JSClass","lodash","q","../util/Topic"],function(e,t,n,i,r,s,a,o){var l={initialize:function(e,t,n,r){this.definitions=e,this.configuration=t||{},this.tokenStore=new i(n),this.variables=r?r:{},this.topic=new o,this.behaviours.startEvent=this.behaviours.takeAll,this.behaviours.endEvent=this.behaviours.takeNone,this.behaviours.userTask=this.behaviours.takeNone,this.behaviours.serviceTask=this.behaviours.takeAll,this.behaviours.exclusiveGateway=this.behaviours.xor,this.behaviours.parallelGateway=this.behaviours.and},behaviours:{takeAll:function(e){return this.dropToken(e.id(),this.tokenStore),e.outgoing()},takeNone:function(){return[]},xor:function(e){if(this.dropToken(e.id(),this.tokenStore),1==e.outgoing().length)return e.outgoing();var t=null;if(s.map(e.outgoing(),function(e){var n=this.configuration[e.id()];!t&&n&&n(this)&&(t=e)},this),!t&&!e.getDefault())throw new Error("No transition evaluated to true and no default defined");return t},and:function(e){var t=!0,n=this.tokenStore.query(e.id()),i={};if(1==e.incoming().length)return s.bind(this.behaviours.takeAll,this)(e);for(var r=0;r<n.length;r++){var a=n[r];i[a.from]=a}var o=[];return s.map(e.incoming(),function(e){i[e.id()]?o.push(e):t=!1},this),t?(s.map(o,function(e){s.bind(this.dropToken,this)(e.sourceRef(),this.tokenStore)},this),s.bind(this.behaviours.takeAll,this)(e)):[]}},dropToken:function(e,t,n){t.query(e).length>0&&t.drop(e,n?n:1)},copyVariables:function(e){if(e)for(var t in e)this.variables[t]=e[t]},start:function(e,t){return this.tokenStore.add(e,{from:null}),this.trigger(e,t)},trigger:function(e,t,n,i){console.log("trigger",e);var r=a.defer(),i=i?i:a.defer();this.copyVariables(t);var o=this.definitions.index.item(e),l=n?this.behaviours[n]:this.behaviours[o.tag];console.log("nodeBehaviour",l);var u=[].concat(s.bind(l,this)(o,this.tokenStore));return console.log("next",u),u.length>0&&this.configuration.leave&&(this.configuration.leave(o),this.topic.publish("flow:leave:"+o.id(),o)),0==u.length&&i.resolve(),u.map(function(e){this.tokenStore.add(e.targetRef(),{from:e.id()});var t="flow:enter:"+e.targetRef();this.topic.publish(t,e.getTargetRef()),this.configuration.enter&&this.configuration.enter(e.getTargetRef());var n=this;r.promise.then(function(){console.log("then for",e.id()),n.trigger(e.targetRef(),null,null,i)})},this),this.configuration[e]&&this.configuration[e]?this.configuration[e]({instance:this,promise:r}):(console.log("resolving",e,this.tokenStore.tokenMap),r.resolve()),i.promise}};return new r.Class(l)}),c("sax",[],function(){return i?r("sax"):"undefined"!=typeof e?e:r("sax")}),c("bpmn/util/Serializer",["require","exports","module","./JSClass","../Package","../Definitions","../BaseElement","sax"],function(t,n,i,r,s,a,o){var l={initialize:function(){},fromXML:function(t){if(t){var n=function(e,t,n,i){if(t.attributes[e]){var r=t.attributes[e].value;"float"==i&&(r=parseFloat(r)),"boolean"==i&&(r="true"==r.toLowerCase()),"integer"==i&&(r=parseInt(r)),n[e](r)}},i=e.parser(!0,{xmlns:!0,lowercase:!0,trim:!0});i.stack=[],Array.prototype.peek=function(){return 0==this.length?null:this[this.length-1]};var r={definitions:function(){i.definitions=new a,i.stack.push(i.definitions)},"default":function(e){var t=i.stack.peek(),r=e.local.toLowerCase(),a=s.tagMap[r],l=a?new a:new o;i.stack.push(l),l._definitions=i.definitions;for(var u in l.attribute)n(u,e,l,l.attribute[u].type);var c=null;for(var h in t.reference){var f=t.reference[h];if(l.isA(f.type)){c=f;break}}l.init(),c&&c.containment===!0?t[c.name]().push(l):c&&t[c.name](l)}};return i.onerror=function(e){console.log("error",e)},i.onopentag=function(e){r[e.local]?r[e.local](e):r["default"](e)},i.onclosetag=function(){i.stack.pop()},i.ontext=function(e){i.stack.peek().setText(e)},i.onend=function(){},i.write(t).close(),i.definitions}}};return new r.Class(l)}),c("fabric",[],function(){return i?r("fabric"):"undefined"!=typeof a?a:r("fabric")}),c("bpmn/util/diagram/Canvas",["require","exports","module","fabric","lodash"],function(e,t,n,r,s){i&&(r=r.fabric);var a=function(e){this.scale=e.scale;var t=null;t=this.canvas=i?r.createCanvasForNode(1e3,1e3):new r.Canvas(e.container);var n=this.shapeGroup=new r.Group([],{left:0,top:0}).setOriginX(0).setOriginY(0);n.setScaleX(this.scale),n.setScaleY(this.scale),t.add(n);var a=this.connectionGroup=new r.Group([],{}).setOriginX(0).setOriginY(0);a.setScaleX(this.scale),a.setScaleY(this.scale),t.add(a),this.draw=function(){this.canvas.renderAll()},this.addShape=function(e){n.add(e)},this.addConnection=function(e){a.add(e)},this.createGroup=function(){return new r.Group([],{top:0,left:0,width:0,height:0}).setOriginX(0).setOriginY(0)},this.createRect=function(e){return new r.Rect({left:e.left,top:e.top,width:e.width,height:e.height,fill:e.fill,stroke:e.stroke,strokeWidth:e.strokeWidth,padding:0,rx:e.cornerRadius,ry:e.cornerRadius})},this.createCircle=function(e){return new r.Circle({radius:e.width/2-e.strokeWidth,left:0,top:0,fill:e.fill,stroke:e.stroke,strokeWidth:e.strokeWidth})},this.createText=function(e){var t={top:e.top,left:e.left,width:e.width,height:e.height,fontSize:e.fontSize,fontFamily:e.fontFamily},n=new r.Text(e.text,t);return n},this.createPolygon=function(e){var t={top:0,left:0,fill:e.fill,stroke:e.stroke,strokeWidth:e.strokeWidth};return new r.Polygon(e.points,t)},this.createPath=function(e){var t=new r.Path(e.data);return t.set({left:0,top:0}),t},this.createArrowLine=function(e,t,n){var i=n?n:8,a=e[e.length-1],o=e[e.length-2],l=Math.atan2(a.y-o.y,a.x-o.x),u={x:a.x-i*Math.cos(l-Math.PI/6),y:a.y-i*Math.sin(l-Math.PI/6)},c=[u,{x:a.x,y:a.y},{x:a.x-i*Math.cos(l+Math.PI/6),y:a.y-i*Math.sin(l+Math.PI/6)}],h=e.concat(c),f=new r.Group([],{}),d=null;
return s.forEach(h,function(e,n){if(0==n)return void(d=e);var i=new r.Line([d.x,d.y,e.x,e.y],{stroke:t.stroke,fill:"white",strokeWidth:t.strokeWidth});f.add(i),d=e}),f},this.expandCanvasIfNeeded=function(e){var t=10,n=e.getLeft(),i=e.getTop(),r=e.getWidth(),s=e.getHeight();(n+r)*this.scale>this.canvas.getWidth()&&this.canvas.setWidth((n+r+t)*this.scale),(i+s)*this.scale>this.canvas.getHeight()&&this.canvas.setHeight((i+s+t)*this.scale),this.canvas.calcOffset()}};return a}),c("bpmn/editor/ActivityRenderer",["require","exports","module"],function(){var e=function(e){this.markerPaths={serviceTask:"m 14.867748,9.688475 c 0.280053,0 0.540605,-0.235339 0.578706,-0.522905 0,0 0.05355,-0.404146 0.05355,-0.884769 0,-0.480624 -0.05355,-0.884771 -0.05355,-0.884771 -0.03823,-0.28772 -0.298653,-0.522904 -0.578706,-0.522904 h -1.447215 c -0.280203,0 -0.571206,-0.18513 -0.646506,-0.411297 -0.0753,-0.226167 -0.178952,-0.951766 0.0192,-1.156948 l 1.023009,-1.060108 c 0.198001,-0.205338 0.213301,-0.555702 0.0339,-0.77876 L 12.646525,2.218443 C 12.431273,2.032379 12.093319,2.048234 11.895017,2.253573 L 10.872008,3.313681 C 10.674005,3.519021 10.343852,3.601716 10.138799,3.49757 9.9335984,3.393425 9.3586419,2.954148 9.3586419,2.663784 V 1.1640891 c 0,-0.29036388 -0.227102,-0.56020928 -0.5046052,-0.59984728 0,0 -0.3900032,-0.055653 -0.8538078,-0.055653 -0.463806,0 -0.8538092,0.055653 -0.8538092,0.055653 C 6.868767,0.60372312 6.6416649,0.87372522 6.6416649,1.1640891 V 2.663784 c 0,0.290364 -0.1785017,0.591765 -0.3969041,0.669951 C 6.0263585,3.411765 5.3263015,3.519177 5.1281493,3.313845 L 4.1051389,2.253728 C 3.9069868,2.04839 3.5688835,2.032535 3.3537816,2.218442 L 2.1500193,3.465857 c -0.179552,0.223058 -0.1642519,0.573422 0.033898,0.77876 L 3.2067775,5.304725 C 3.4049297,5.510063 3.4848802,5.852033 3.3842297,6.064521 3.2835793,6.277009 2.8598246,6.87297 2.5796218,6.87297 H 1.1325571 c -0.2802027,0 -0.54060564,0.235339 -0.57885593,0.522904 0,0 -0.0537012,0.404147 -0.0537012,0.88477 0,0.480779 0.0537012,0.88477 0.0537012,0.88477 0.0380982,0.287721 0.29865323,0.522904 0.57885593,0.522904 h 1.4472148 c 0.2802028,0 0.5710558,0.184976 0.6463564,0.411299 0.075301,0.226165 0.1789517,0.951609 -0.019201,1.156947 L 2.184067,12.316517 c -0.1981522,0.205337 -0.2134522,0.555702 -0.033898,0.77876 l 1.2036123,1.24757 c 0.2152519,0.185908 0.5532051,0.170209 0.7513572,-0.03514 l 1.0230111,-1.060103 c 0.1981514,-0.205185 0.5281549,-0.288035 0.7333572,-0.183889 0.2052015,0.104146 0.7801577,0.543423 0.7801577,0.833786 V 15.3972 c 0,0.29021 0.2271024,0.56021 0.5047551,0.599692 0,0 0.3898537,0.05549 0.8538092,0.05549 0.4639541,0 0.8538078,-0.05549 0.8538078,-0.05549 0.2776533,-0.03963 0.5046052,-0.309482 0.5046052,-0.599691 v -1.499692 c 0,-0.290364 0.1785024,-0.59192 0.3969045,-0.669951 0.2184021,-0.07803 0.9184587,-0.185287 1.1166107,0.01989 l 1.022859,1.060109 c 0.198152,0.205183 0.536256,0.221037 0.751509,0.03514 l 1.203613,-1.247104 c 0.179402,-0.223059 0.164251,-0.573266 -0.03405,-0.778759 l -1.022859,-1.059949 c -0.198153,-0.205337 -0.278104,-0.547307 -0.177453,-0.75995 0.100501,-0.212644 0.524406,-0.80845 0.804608,-0.80845 h 1.447365 z m -6.8676686,1.437052 c -1.5162163,0 -2.7453284,-1.273528 -2.7453284,-2.844882 0,-1.571043 1.2291121,-2.844882 2.7453284,-2.844882 1.5162152,0 2.7453276,1.273683 2.7453276,2.844882 0,1.571198 -1.2291124,2.844882 -2.7453276,2.844882 z",userTask:"M 7.6955681,7.542161 C 7.3167492,6.843663 6.852991,6.278031 6.3879925,5.882595 5.8454944,6.288155 5.1845767,6.534907 4.4641391,6.534907 3.7424616,6.534907 3.0809239,6.287522 2.5390458,5.882595 2.0740474,6.278031 1.610289,6.843663 1.2302303,7.542161 0.34859343,9.163766 0.25187377,10.827129 1.0132311,11.258629 c 0.3409988,0.194238 0.6987376,0.04935 1.0682563,-0.313818 -0.0651,0.36823 -0.1029196,0.767462 -0.1029196,1.185042 0,1.85507 0.7061775,3.357728 1.5766545,3.357728 0.5245182,0 0.7842973,-0.547284 0.9089168,-1.384976 0.1246196,0.837692 0.3843987,1.384976 0.9070569,1.384976 0.8717169,0 1.5778946,-1.502658 1.5778946,-3.357728 0,-0.41758 -0.037821,-0.816812 -0.1041598,-1.185042 0.3707588,0.363168 0.7278777,0.508056 1.0694965,0.313818 0.761357,-0.4315 0.6627773,-2.094863 -0.2188592,-3.716468 z M 4.4635192,5.902209 c 1.4644349,0 2.652351,-1.212249 2.652351,-2.707314 0,-1.495065 -1.1879161,-2.70731418 -2.652351,-2.70731418 -1.4650549,0 -2.6535908,1.21224918 -2.6535908,2.70731418 0,1.495065 1.1885359,2.707314 2.6535908,2.707314 z",businessRuleTask:"m -6.6775,-6.4391075 v 1.7073217 H 6.3224105 V -6.4391075 H -6.6775 z m 0,9.2357054 H 6.3224105 V 1.0892767 H -6.6775 v 1.7073212 z m 0,-3.76419196 H 6.3224105 V -2.6749155 H -6.6775 v 1.70732144 z m 0,7.52781506 H 6.3224105 V 4.8528994 H -6.6775 V 6.560221 z",receiveTask:"m 6.612092,-4.0112852 -12.2876956,0.048953 -1.1259638,0 0.8811885,0.7098496 3.2310263,2.54565661 L -6.2385858,-3.3748709 -6.875,-3.839943 l 0,0.7832793 0,8.6650229 L -6.875,6 -6.4833605,6 7.395362,6 7.787,6 l 0,-0.3916408 0,-8.6650229 0,-0.7832793 -0.636423,0.4650721 -3.891903,2.93729731 3.598184,-2.86386481 0.881186,-0.7098468 -1.125952,0 z M 5.510602,-3.228006 0.44376231,0.78629811 -4.54964,-3.1790514 5.510602,-3.2280057 z m -11.6023227,0.9546218 6.31518591,4.7241513 0.2447763,0.1713424 0.220297,-0.1713424 6.31519149,-4.7241513 0,7.4901076 -13.0954507,0 0,-7.4901076 z"},this.createRectangle=function(t){var n=e.skin().activity_corner_radius;return e.canvas.createRect({left:0,top:0,width:t.width(),height:t.height(),cornerRadius:n,stroke:e.skin().activity_stroke,fill:e.skin().activity_fill,strokeWidth:2})},this.getPathForActivityType=function(e){return this.markerPaths[e.tag]},this.createMarker=function(t){var n=e.canvas.createPath({x:0,y:0,data:t,stroke:e.skin().activity_stroke,fill:e.skin().activity_fill});return n},this.render=function(e,t){var n=e.getBounds(),i=this.createRectangle(n);t.add(i);var r=this.getPathForActivityType(e);if(r){var s=this.createMarker(r);t.add(s)}return t}};return e}),c("bpmn/editor/EventRenderer",["require","exports","module","lodash","../EndEvent"],function(e,t,n,i,r){var s=function(e){this.typeProperties=function(e){return e instanceof r?{strokeWidth:4}:{}},this.render=function(t,n){var r=t.getBounds(),s={left:0,top:0,width:r.width(),height:r.height(),fill:e.skin().event_fill,stroke:e.skin().event_stroke,strokeWidth:2};i.extend(s,this.typeProperties(t));var a=e.canvas.createCircle(s);return n.add(a),n}};return s}),c("bpmn/editor/GatewayRenderer",["require","exports","module"],function(){var e=function(e){this.render=function(t,n){var i=t.getBounds(),r=e.canvas.createPolygon({points:[{x:0,y:i.height()/2},{x:i.width()/2,y:0},{x:i.width(),y:i.height()/2},{x:i.width()/2,y:i.height()}],stroke:e.skin().gateway_stroke,fill:e.skin().gateway_fill,strokeWidth:2,draggable:!0});return n.add(r),n}};return e}),c("bpmn/editor/LabelRenderer",["require","exports","module"],function(){var e=function(e){this.renderCentered=function(e,t,n){var i=this.createLabelText(n,e),r={top:e.height()/2-i.getFontSize()/2,left:e.width()/2-i.getWidth()/2};return i.set(r).setCoords(),t.add(i),t},this.createLabelText=function(t,n){return e.canvas.createText({text:t.replace(/\\n/g,"\n"),width:n.width(),height:n.height(),fontSize:e.skin().label_font_size,fontFamily:e.skin().label_font_family,fill:e.skin().label_fill})}};return e}),c("bpmn/editor/Renderer",["require","exports","module","../util/JSClass","lodash","../Activity","../Gateway","../Event","../SequenceFlow","../util/diagram/Canvas","./ActivityRenderer","./EventRenderer","./GatewayRenderer","./LabelRenderer"],function(e,t,n,i,r,s,a,o,l,u,c,h,f,d){var p={skins:{"default":{sequence_flow_stroke:"black",event_stroke:"black",event_fill:"white",activity_stroke:"black",activity_fill:"white",activity_corner_radius:10,gateway_stroke:"black",gateway_fill:"white",label_font_family:"Arial",label_font_size:12,label_fill:"black"}},initialize:function(e,t){this.definitions=e,this.skinName="default",this.bindDelegates(),this.evaluateOptionsAndDefaults(t),this.canvas=new u(this.options)},bindDelegates:function(){this.activity=new c(this),this.event=new h(this),this.gateway=new f(this),this.label=new d(this)},evaluateOptionsAndDefaults:function(e){this.options=e,this.skinName=e.skin?e.skin:"default",this.options.scale=e.scale?e.scale:1},render:function(){this.renderElements(),this.canvas.draw()},renderElements:function(){if(this.definitions.process().length>1)throw new Error("Only single process models are supported");r.forEach(this.definitions.process(),function(e){r.forEach(e.flowElements(),function(e){this.renderElement(e)},this)},this)},renderElement:function(e){var t=this.canvas.createGroup({draggable:!0});if(e instanceof l)this.renderConnection(e,t),this.canvas.addConnection(t);else if(e instanceof s){var n=this.activity.render(e,t);this.label.renderCentered(e.getBounds(),n,e.name()),this.canvas.addShape(t),this.setGroupBounds(t,e.getBounds())}else e instanceof o?(this.event.render(e,t),this.canvas.addShape(t),this.setGroupBounds(t,this.eventBounds(e))):e instanceof a?(this.gateway.render(e,t),this.canvas.addShape(t),this.setGroupBounds(t,e.getBounds())):console.log("unable to render flowElement",e);this.canvas.expandCanvasIfNeeded(t)},eventBounds:function(e){var t=e.getBounds();return{x:function(){return t.x()},y:function(){return t.y()},width:function(){return t.width()},height:function(){return t.height()}}},setGroupBounds:function(e,t,n){var n=n?n:0,i={left:t.x()+n,top:t.y()+n,width:t.width(),height:t.height()};e.set(i).setCoords()},renderConnection:function(e,t){var n=this.canvas.createArrowLine(e.getWaypoints(),{stroke:this.skin().sequence_flow_stroke,strokeWidth:2,lineCap:"round",lineJoin:"round"});return t.add(n),t},skin:function(){return this.skins[this.skinName]}};return new i.Class(p)}),c("bpmn/Bpmn",["require","exports","module","./util/JSClass","./Definitions","./execution/Instance","./util/Serializer","./editor/Renderer"],function(e,n,i,r,s,a,o,l){var u={initialize:function(){this.serializer=new o},fromXML:function(e){return this.serializer.fromXML(e)},renderer:function(e,t){return new l(e,t)},instance:function(e,t){return new a(e,t)}},c=new r.Class(u);return t.Bpmn=c,c}),u("bpmn/Bpmn")};return n?define(["sax","jquery","lodash","fabric","q"],s):i?module.exports=s(require("sax"),require("jquery"),require("lodash"),require("fabric"),require("q")):s("undefined"!=typeof sax?sax:void 0,"undefined"!=typeof $?$:void 0,"undefined"!=typeof _?_:void 0,"undefined"!=typeof fabric?fabric:void 0,"undefined"!=typeof Q?Q:void 0)}).call(this,"object"==typeof exports?global:window,"object"==typeof exports?global:window);